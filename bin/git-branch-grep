#!/bin/bash

# set -x

# branch list no color, sorted by commit date descending (`-committerdate`)
blnc() {
  git branch --no-color --list --sort=-committerdate "$@"
}

if [[ -z "$*" ]]; then
  exit 1
fi


# prefer exact match (first) over loose wildcard match (second)
grep_results=$(blnc "$*"; blnc "*$**")

# filter results to exclude current branch and return first match
current_branch=$(git rev-parse --abbrev-ref HEAD)
echo "$grep_results" | grep -v "$current_branch$" | head -n1 | awk '{ print $NF }';
