#!/bin/bash

SEARCH=${@:-''}

FORMAT=""
FORMAT+="(%(color:green)%(committerdate:relative)%(color:reset)),"
FORMAT+="%(HEAD) %(color:yellow)%(refname:short)%(color:reset),"
FORMAT+="%(authorname),"
FORMAT+="%(contents:subject)"

git for-each-ref \
  --sort=committerdate refs/heads/ \
  --format="$FORMAT" \
  | grep -i "$SEARCH" \
  | column -t -s ','
